"use strict";function _arrayWithHoles(t){if(Array.isArray(t))return t}var arrayWithHoles=_arrayWithHoles;function _iterableToArrayLimit(t,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var r=[],n=!0,o=!1,a=void 0;try{for(var i,c=t[Symbol.iterator]();!(n=(i=c.next()).done)&&(r.push(i.value),!e||r.length!==e);n=!0);}catch(t){o=!0,a=t}finally{try{n||null==c.return||c.return()}finally{if(o)throw a}}return r}}var iterableToArrayLimit=_iterableToArrayLimit;function _arrayLikeToArray(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var arrayLikeToArray=_arrayLikeToArray;function _unsupportedIterableToArray(t,e){if(t){if("string"==typeof t)return arrayLikeToArray(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?arrayLikeToArray(t,e):void 0}}var unsupportedIterableToArray=_unsupportedIterableToArray;function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var nonIterableRest=_nonIterableRest;function _slicedToArray(t,e){return arrayWithHoles(t)||iterableToArrayLimit(t,e)||unsupportedIterableToArray(t,e)||nonIterableRest()}var slicedToArray=_slicedToArray;function _createForOfIteratorHelper(t,e){var r;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(r=unsupportedIterableToArray(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,c=!1;return{s:function(){r=t[Symbol.iterator]()},n:function(){var t=r.next();return i=t.done,t},e:function(t){c=!0,a=t},f:function(){try{i||null==r.return||r.return()}finally{if(c)throw a}}}}var createForOfIteratorHelper=_createForOfIteratorHelper;function createCommonjsModule(t,e,r){return t(r={path:e,exports:{},require:function(t,e){return commonjsRequire(t,null==e?r.path:e)}},r.exports),r.exports}function commonjsRequire(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}var _typeof_1=createCommonjsModule(function(e){function r(t){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?e.exports=r=function(t){return typeof t}:e.exports=r=function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}e.exports=r}),runtime_1=createCommonjsModule(function(t){var e=function(i){var l,t=Object.prototype,f=t.hasOwnProperty,e="function"==typeof Symbol?Symbol:{},o=e.iterator||"@@iterator",r=e.asyncIterator||"@@asyncIterator",n=e.toStringTag||"@@toStringTag";function c(t,e,r,n){var a,i,c,u,o=e&&e.prototype instanceof g?e:g,s=Object.create(o.prototype),f=new E(n||[]);return s._invoke=(a=t,i=r,c=f,u=p,function(t,e){if(u===d)throw new Error("Generator is already running");if(u===m){if("throw"===t)throw e;return S()}for(c.method=t,c.arg=e;;){var r=c.delegate;if(r){var n=function t(e,r){var n=e.iterator[r.method];if(n===l){if(r.delegate=null,"throw"===r.method){if(e.iterator.return&&(r.method="return",r.arg=l,t(e,r),"throw"===r.method))return v;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return v}var o=h(n,e.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,v;var a=o.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=l),r.delegate=null,v):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}(r,c);if(n){if(n===v)continue;return n}}if("next"===c.method)c.sent=c._sent=c.arg;else if("throw"===c.method){if(u===p)throw u=m,c.arg;c.dispatchException(c.arg)}else"return"===c.method&&c.abrupt("return",c.arg);u=d;var o=h(a,i,c);if("normal"===o.type){if(u=c.done?m:y,o.arg===v)continue;return{value:o.arg,done:c.done}}"throw"===o.type&&(u=m,c.method="throw",c.arg=o.arg)}}),s}function h(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}i.wrap=c;var p="suspendedStart",y="suspendedYield",d="executing",m="completed",v={};function g(){}function a(){}function u(){}var s={};s[o]=function(){return this};var b=Object.getPrototypeOf,w=b&&b(b(A([])));w&&w!==t&&f.call(w,o)&&(s=w);var x=u.prototype=g.prototype=Object.create(s);function T(t){["next","throw","return"].forEach(function(e){t[e]=function(t){return this._invoke(e,t)}})}function k(u,s){var e;this._invoke=function(r,n){function t(){return new s(function(t,e){!function e(t,r,n,o){var a=h(u[t],u,r);if("throw"!==a.type){var i=a.arg,c=i.value;return c&&"object"===_typeof_1(c)&&f.call(c,"__await")?s.resolve(c.__await).then(function(t){e("next",t,n,o)},function(t){e("throw",t,n,o)}):s.resolve(c).then(function(t){i.value=t,n(i)},function(t){return e("throw",t,n,o)})}o(a.arg)}(r,n,t,e)})}return e=e?e.then(t,t):t()}}function L(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function _(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(L,this),this.reset(!0)}function A(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,n=function t(){for(;++r<e.length;)if(f.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=l,t.done=!0,t};return n.next=n}}return{next:S}}function S(){return{value:l,done:!0}}return(a.prototype=x.constructor=u).constructor=a,u[n]=a.displayName="GeneratorFunction",i.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===a||"GeneratorFunction"===(e.displayName||e.name))},i.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,u):(t.__proto__=u,n in t||(t[n]="GeneratorFunction")),t.prototype=Object.create(x),t},i.awrap=function(t){return{__await:t}},T(k.prototype),k.prototype[r]=function(){return this},i.AsyncIterator=k,i.async=function(t,e,r,n,o){void 0===o&&(o=Promise);var a=new k(c(t,e,r,n),o);return i.isGeneratorFunction(e)?a:a.next().then(function(t){return t.done?t.value:a.next()})},T(x),x[n]="Generator",x[o]=function(){return this},x.toString=function(){return"[object Generator]"},i.keys=function(r){var n=[];for(var t in r)n.push(t);return n.reverse(),function t(){for(;n.length;){var e=n.pop();if(e in r)return t.value=e,t.done=!1,t}return t.done=!0,t}},i.values=A,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=l,this.done=!1,this.delegate=null,this.method="next",this.arg=l,this.tryEntries.forEach(_),!t)for(var e in this)"t"===e.charAt(0)&&f.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=l)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(r){if(this.done)throw r;var n=this;function t(t,e){return a.type="throw",a.arg=r,n.next=t,e&&(n.method="next",n.arg=l),!!e}for(var e=this.tryEntries.length-1;0<=e;--e){var o=this.tryEntries[e],a=o.completion;if("root"===o.tryLoc)return t("end");if(o.tryLoc<=this.prev){var i=f.call(o,"catchLoc"),c=f.call(o,"finallyLoc");if(i&&c){if(this.prev<o.catchLoc)return t(o.catchLoc,!0);if(this.prev<o.finallyLoc)return t(o.finallyLoc)}else if(i){if(this.prev<o.catchLoc)return t(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return t(o.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;0<=r;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&f.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,v):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),_(r),v}},catch:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n,o=r.completion;return"throw"===o.type&&(n=o.arg,_(r)),n}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:A(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=l),v}},i}(t.exports);try{regeneratorRuntime=e}catch(t){Function("r","regeneratorRuntime = r")(e)}}),regenerator=runtime_1;function asyncGeneratorStep(t,e,r,n,o,a,i){try{var c=t[a](i),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function _asyncToGenerator(c){return function(){var t=this,i=arguments;return new Promise(function(e,r){var n=c.apply(t,i);function o(t){asyncGeneratorStep(n,e,r,o,a,"next",t)}function a(t){asyncGeneratorStep(n,e,r,o,a,"throw",t)}o(void 0)})}}var asyncToGenerator=_asyncToGenerator,numberFormat=/^\d+$/,timeFormat=/^(?:(?:(\d+):)?(\d{1,2}):)?(\d{1,2})(?:\.(\d{3}))?$/,timeUnits={ms:1,s:1e3,m:6e4,h:36e5},parseTime=function(t){if("number"==typeof t)return t;if(numberFormat.test(t))return+t;var e=timeFormat.exec(t);if(e)return(e[1]||0)*timeUnits.h+(e[2]||0)*timeUnits.m+e[3]*timeUnits.s+ +(e[4]||0);for(var r,n=0,o=/(-?\d+)(ms|s|m|h)/g;null!=(r=o.exec(t));)n+=r[1]*timeUnits[r[2]];return n};!function(g,b,u){g.ytembedcache={};g.YTIE=function(t){function l(t){var e,r=t.match(o);return r&&11==r[2].length?r[2]:(e=t,!!n.test(e)&&t)}function h(t,e){return t.getAttribute("data-".concat(e))}function p(t){return t.filter(function(t){return!(!(e=t).qualityLabel||(r=e).audioBitrate||r.audioSampleRate);var e,r})}var i=t||g.ytembedworkerurl,n=/^[a-zA-Z0-9-_]{11}$/,o=/^.*(youtu\.be\/|v\/|u\/\w\/|embed\/|watch\?v=|\&v=)([^#\&\?]*).*/,y=(Math.max(b.documentElement.clientWidth||0,g.innerWidth||0),function(){var e=asyncToGenerator(regenerator.mark(function t(e){var r,n,o,a;return regenerator.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(r=g.ytembedcache[e])return t.abrupt("return",r);t.next=3;break;case 3:return n=new URL("info/".concat(e),i),t.next=6,fetch(n,{method:"GET",redirect:"follow"});case 6:if(o=t.sent,(a=o.headers.get("content-type"))&&-1===a.indexOf("application/json"))return t.t0=Error,t.next=12,o.text();t.next=14;break;case 12:throw t.t1=t.sent,new t.t0(t.t1);case 14:return t.next=16,o.json();case 16:return r=t.sent,t.abrupt("return",r);case 18:case"end":return t.stop()}},t)}));return function(t){return e.apply(this,arguments)}}()),d=function(){var r=asyncToGenerator(regenerator.mark(function t(e,r){var n,o,a,i,c,u,s,f;return regenerator.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,y(e);case 2:if(n=t.sent,o=p(n.formats)||n.formats,r>=o[0].width)return t.abrupt("return",[o[0].url,o[0].width/o[0].height]);t.next=6;break;case 6:i=createForOfIteratorHelper(o.entries()),t.prev=7,i.s();case 9:if((c=i.n()).done){t.next=16;break}if(u=slicedToArray(c.value,2),s=u[0],f=u[1],r>f.width)return a=o[s-1],t.abrupt("break",16);t.next=14;break;case 14:t.next=9;break;case 16:t.next=21;break;case 18:t.prev=18,t.t0=t.catch(7),i.e(t.t0);case 21:return t.prev=21,i.f(),t.finish(21);case 24:return a=a||o.pop(),t.abrupt("return",[a.url,a.width/a.height]);case 26:case"end":return t.stop()}},t,null,[[7,18,21,24]])}));return function(t,e){return r.apply(this,arguments)}}(),m=function(){var n=asyncToGenerator(regenerator.mark(function t(e,r,n){var o,a,i,c;return regenerator.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:(o=b.createElement("video")).muted=!0,o.preload="metadata",(a=b.createElement("canvas")).width=e.iWidth,a.height=e.iHeight?e.iHeight:a.width/n,i=a.getContext("2d"),c=function(){var t=asyncToGenerator(regenerator.mark(function t(){return regenerator.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:o.onseeked=function(t){i.drawImage(o,0,0,a.width,a.height),o.src="",o.load(),e.element.appendChild(a)},o.currentTime=e.time;case 2:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}}(),o.onloadedmetadata=function(t){o.duration>=e.time?c():console.log("Timestamp exceeds duration of video id=".concat(e.id))},o.src="".concat(r,"#t=").concat(e.time,",").concat(e.time+1);case 10:case"end":return t.stop()}},t)}));return function(t,e,r){return n.apply(this,arguments)}}(),e=function(){var e=asyncToGenerator(regenerator.mark(function t(e){var r,n,o,a,i,c,u,s,f;return regenerator.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e){t.next=2;break}return t.abrupt("return");case 2:if(("string"==typeof(r=e)||e instanceof String)&&(r=b.querySelector(e)),r){t.next=6;break}throw Error("load() requires a valid element node or selector string");case 6:if(n=h(r,"time"),o=h(r,"url")){t.next=10;break}return t.abrupt("return");case 10:if(a=l(o),n){t.next=14;break}return v(r,a),t.abrupt("return");case 14:return i={id:a,time:parseTime(n)/1e3,iWidth:parseInt(h(r,"width"))||r.clientWidth||r.parentElement.clientWidth||g.screen.width,iHeight:h(r,"height"),element:r},t.next=17,d(k,largestWidth);case 17:c=t.sent,u=slicedToArray(c,2),s=u[0],f=u[1],m(i,s,f);case 22:case"end":return t.stop()}},t)}));return function(t){return e.apply(this,arguments)}}(),v=function(){var r=asyncToGenerator(regenerator.mark(function t(e,r){var n;return regenerator.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:(n=new Image).src="https://img.youtube.com/vi_webp/".concat(r,"/maxresdefault.webp"),e.appendChild(n),console.log("No time was provided for screenshot. Setting thumbnail.\n".concat(e));case 4:case"end":return t.stop()}},t)}));return function(t,e){return r.apply(this,arguments)}}(),r=function(){var t=asyncToGenerator(regenerator.mark(function t(){var e,r,n,o,a,i,c;return regenerator.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e={},r=createForOfIteratorHelper(b.querySelectorAll(".yt-image-embed")),t.prev=2,r.s();case 4:if((n=r.n()).done){t.next=18;break}if(o=n.value,a=h(o,"time"),i=h(o,"url")){t.next=10;break}return t.abrupt("continue",16);case 10:if(c=l(i),a){t.next=14;break}return v(o,c),t.abrupt("continue",16);case 14:e[c]===u&&(e[c]=[]),e[c].push({id:c,time:parseTime(a)/1e3,iWidth:parseInt(h(o,"width"))||o.clientWidth||o.parentElement.clientWidth||g.screen.width,iHeight:h(o,"height"),element:o});case 16:t.next=4;break;case 18:t.next=23;break;case 20:t.prev=20,t.t0=t.catch(2),r.e(t.t0);case 23:return t.prev=23,r.f(),t.finish(23);case 26:Object.entries(e).forEach(function(t){var e=slicedToArray(t,2),r=e[0],o=e[1],n=o.reduce(function(t,e){return e.iWidth>t?e.iWidth:t},o[0].iWidth);d(r,n).then(function(t){var e=slicedToArray(t,2),r=e[0],n=e[1];o.forEach(function(){var e=asyncToGenerator(regenerator.mark(function t(e){return regenerator.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:m(e,r,n);case 1:case"end":return t.stop()}},t)}));return function(t){return e.apply(this,arguments)}}())})});case 27:case"end":return t.stop()}},t,null,[[2,20,23,26]])}));return function(){return t.apply(this,arguments)}}();return g.ytembedworkerurl=i,{load:e,loadAll:r}}}(window,document,void 0);
